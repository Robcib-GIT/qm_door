<launch>
      <arg name="kinova_robotType" default="j2n6s300"/>

      <rosparam file="$(find qm_gazebo)/config/default.yaml" command="load"/>

      <!-- Load descriptions -->
      <param name="qm_description" command="$(find xacro)/xacro $(find qm_description)/urdf/quadruped_manipulator/robot.xacro"/>
      <param name="robot_description" command="$(find xacro)/xacro $(find qm_description)/urdf/quadruped_manipulator/robot.xacro"/>
      <param name="legged_robot_description" command="$(find xacro)/xacro $(find qm_description)/urdf/quadruped_manipulator/robot.xacro"/>
      <param name="door_description" command="$(find xacro)/xacro $(find qm_description)/urdf/doors/door_push.xacro"/>
      <param name="wall_1_description" command="$(find xacro)/xacro $(find qm_description)/urdf/walls/wall_1.xacro"/>
      <param name="wall_2_description" command="$(find xacro)/xacro $(find qm_description)/urdf/walls/wall_2.xacro"/>


      <!-- Include empty Gazebo world -->
      <include file="$(find gazebo_ros)/launch/empty_world.launch">
            <arg name="paused" value="true"/>
            <arg name="gui" value="true"/>
      </include>

      <!-- Spawn robot in Gazebo -->
      <node name="spawn_urdf" pkg="gazebo_ros" type="spawn_model" clear_params="true"
            output="screen"
            args="-param qm_description -urdf -model qm
            -x -2
            -z 0.55
            -J $(arg kinova_robotType)_joint_1 3.14
            -J $(arg kinova_robotType)_joint_2 3.61
            -J $(arg kinova_robotType)_joint_3 0.86
            -J $(arg kinova_robotType)_joint_4 2.7
            -J $(arg kinova_robotType)_joint_5 1.37
            -J $(arg kinova_robotType)_joint_6 -0.4
            "
      />

      <!-- Spawn walls in Gazebo -->
      <node name="spawn_wall_1" pkg="gazebo_ros" type="spawn_model" clear_params="true"
            output="screen"
            args="-param wall_1_description -urdf -model wall_1
            -x 0 -y 1.952 -z 1.05"
      />
      <node name="spawn_wall_2" pkg="gazebo_ros" type="spawn_model" clear_params="true"
            output="screen"
            args="-param wall_2_description -urdf -model wall_2
            -x 0 -y -1.952 -z 1.05"
      />

      <!-- Publish static transforms for the walls -->
      <node pkg="tf2_ros" type="static_transform_publisher" name="wall_1_tf_publisher"
            args="0 1.952 1.05 0 0 0 world wall_1_link"
      />
      <node pkg="tf2_ros" type="static_transform_publisher" name="wall_2_tf_publisher"
            args="0 -1.952 1.05 0 0 0 world wall_2_link"
      />

      <!-- Spawn door in Gazebo -->
      <node name="spawn_door" pkg="gazebo_ros" type="spawn_model" clear_params="true"
            output="screen"
            args="-param door_description -urdf -model door" />

      <node name="robot_state_publisher" pkg="robot_state_publisher" type="robot_state_publisher"
                  output="screen">
            <remap from="robot_description" to="door_description" />
            <param name="publish_frequency" value="50.0"/>
      </node>

      <node name="joint_state_publisher" pkg="joint_state_publisher" type="joint_state_publisher"
            output="screen">
            <remap from="robot_description" to="door_description" />
            <param name="use_gui" value="true"/>
      </node>

</launch>